<body ng-controller='UrlsController as url'>
<% if @url.any? && current_user %>
<% @url.each do |url| %>

    <h2> <%= url.name if url.user == current_user%> </h2>
    <h2> <%= url.link if url.user == current_user%> </h2>
  <% end %>
<% else %>
  No urls yet
<% end %>

<% if current_user %>
<p>Add link</p>
  <%= form_for @url.new do |f| %>
    <%= f.label :link %>
    <%= f.text_field :link, required: true %>
    <%= f.submit %>
  <% end %>
  <div class="container" ng-view>
    <section>
      <button ng-hide="url.loaded" ng-click="url.showBias()">Show my bias</button>
      <button ng-show="url.loaded" ng-click="url.hideBias()">Hide my bias</button>
      <h1 ng-show="url.loaded"> My bias rating: {{url.analysisResponse}} </h1>
      <button ng-hide="url.furtherInfoLoaded" ng-click="url.showBreakDown()">Show my media diet</button>
      <button ng-show="url.furtherInfoLoaded" ng-click="url.hideBreakDown()">Hide my media diet</button>
      <h1 ng-show="url.furtherInfoLoaded"> My media diet: {{url.breakdownResponse}} </h1>

    </section>

    <section>
      <button ng-hide="url.suggestionsLoaded" ng-click="url.showSuggestions()">What paper should I read?</button>
      <button ng-show="url.suggestionsLoaded" ng-click="url.hideSuggestions()">Hide suggestions</button>

      <h1 ng-show="url.suggestionsLoaded"> Suggested Papers: {{url.suggestionsResponse}} </h1>

    </section>
    <section>
      <button ng-click="url.getSuggestions()">Get me an article</button>
      <a ng-show="url.articleLoaded" href="{{url.articles}}">Click Me</a>
    </section>
  </div>
<% else %>
  <p> Sign up to get involved </p>
<% end %>
</body>
